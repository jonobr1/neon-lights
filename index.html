<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<style>
			body {
				margin: 0;
			}
			audio {
				position: absolute;
				left: calc(50% - 150px);
				bottom: 25px;
				opacity: 0.5;
				transition: opacity 1s;
			}
		</style>
	</head>
	<body>
		<audio id="audio" src="./assets/audio/03 Under Neon Lights.mp3" controls></audio>
		<script src="./third-party/three.js"></script>
		<script>

			var timeoutID;

			function showControls( event ) {

				audio.style.opacity = 0.5;
				document.body.style.cursor = 'default';

				if ( timeoutID !== undefined ) {

					clearTimeout( timeoutID );

				}

				timeoutID = setTimeout( function () {

					audio.style.opacity = 0;
					document.body.style.cursor = 'none';

				}, 1000 );

			};

			document.addEventListener( 'mousemove', showControls );
			document.addEventListener( 'touchstart', showControls );

			//

			var camera, scene, renderer;

			init();
			animate();

			function init() {

				camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 0.1, 100 );

				scene = new THREE.Scene();

				scene.add( new THREE.HemisphereLight( 0x444444, 0x222222 ) );

				var light = new THREE.DirectionalLight( 0xffffff );
				light.position.set( 1, 1, 1 );
				scene.add( light );

				var geometry = new THREE.CylinderBufferGeometry( 0.5, 0.5, 150, 20, 300 );
				geometry.translate( 0, 75, 0 );
				var material = new THREE.MeshBasicMaterial( { wireframe: true } );
				var mesh = new THREE.Mesh( geometry, material );
				scene.add( mesh );

				var geometry = new THREE.IcosahedronGeometry( 0.4, 3 );

				// scene 1

				var group = new THREE.Group();
				group.position.y = 5;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xff0000 } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 2

				var group = new THREE.Group();
				group.position.y = 20;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0x00ff00 } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 3

				var group = new THREE.Group();
				group.position.y = 35;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0x0000ff } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 4

				var group = new THREE.Group();
				group.position.y = 50;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xff00ff } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 4

				var group = new THREE.Group();
				group.position.y = 65;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xffff00 } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 5

				var group = new THREE.Group();
				group.position.y = 80;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0x00ffff } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 5

				var group = new THREE.Group();
				group.position.y = 95;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xf00fff } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 6

				var group = new THREE.Group();
				group.position.y = 110;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xfff00f } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				// scene 7

				var group = new THREE.Group();
				group.position.y = 125;
				scene.add( group );
				var material = new THREE.MeshPhongMaterial( { color: 0xffffff } );

				for ( var i = 0; i < 100; i ++ ) {

					var sphere = new THREE.Mesh( geometry, material );
					sphere.position.x = Math.random() * 20 - 10;
					sphere.position.y = Math.random() * 20 - 10;
					sphere.position.z = Math.random() * 20 - 10;
					group.add( sphere );

				}

				//

				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.shadowMap.enabled = true;
				renderer.gammaInput = true;
				renderer.gammaOutput = true;
				document.body.appendChild( renderer.domElement );

				//

				window.addEventListener( 'resize', onWindowResize, false );

			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function animate() {

				requestAnimationFrame( animate );

				var time = audio.currentTime;

				camera.position.y = time / 2;
				camera.rotation.y = - time / 6;

				renderer.render( scene, camera );

			}

		</script>
	</body>
</html>
